Bootstrap: docker
From: nvcr.io/nvidia/pytorch:25.12-py3

%files
    requirements.txt /opt/requirements.txt

%post
    export DEBIAN_FRONTEND=noninteractive

    apt-get -y update
    apt-get -y upgrade

    apt-get install --yes --no-install-recommends \
    bzip2 \
    ca-certificates \
    locales \
    sudo \
    wget

    # Install requirements
    # We rely on the pre-installed PyTorch in the NVIDIA container
    # and only install missing dependencies from requirements.txt.
    pip install -r /opt/requirements.txt

%environment
    # The NVIDIA container sets up the environment variables for CUDA and PyTorch.
    # We don't need to manually set VIRTUAL_ENV as we installed into the system python.
